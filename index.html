<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IFrame Test</title>
</head>
<body>
    <textarea id="htmlInput" style="width:100%;height:100px;">
<iframe src="https://example.com" width="100%" height="300"></iframe>
    </textarea>
    <button onclick="openInNewTab()">Preview page</button>
    <div>
        <strong>Live Preview:</strong>
        <iframe id="livePreview" width="100%" height="300"></iframe>
    </div>
    <script>
        function openInNewTab() {
            var userHtml = document.getElementById("htmlInput").value;
            var newWindow = window.open();
            newWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset='UTF-8'>
                    <title>Preview</title>
                </head>
                <body>
                    ${userHtml}
                </body>
                </html>
            `);
            newWindow.document.close();
        }
        function updateLivePreview() {
            var html = document.getElementById("htmlInput").value;
            document.getElementById("livePreview").srcdoc = html;
        }
        document.getElementById("htmlInput").addEventListener("input", updateLivePreview);
        window.onload = updateLivePreview;
    </script>
</body>
</html>
